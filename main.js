/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MostUsedWordsPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var MostUsedWordsPlugin = class extends import_obsidian.Plugin {
  constructor() {
    super(...arguments);
    this.wordCountMap = /* @__PURE__ */ new Map();
    this.activeView = null;
  }
  onload() {
    this.addRibbonIcon("document", "Show Most Used Words List", async () => {
      await this.showMostUsedWordsList();
    });
    this.addCommand({
      id: "show-most-used-words-list",
      name: "Show Most Used Words List",
      callback: async () => {
        await this.showMostUsedWordsList();
      }
    });
    this.registerEvent(this.app.workspace.on("file-open", this.handleFileOpen.bind(this)));
  }
  async showMostUsedWordsList() {
    if (this.wordCountMap.size === 0) {
      await this.calculateWordCountMap();
    }
    const sortedWords = this.getSortedWords();
    const topWords = sortedWords.slice(0, 100);
    const wordList = topWords.map(([word, count], index) => `${index + 1}: ${word} (${count})`);
    const leaf = this.app.workspace.getLeaf();
    const view = new MostUsedWordsView(leaf, wordList);
    leaf.open(view);
    this.activeView = view;
  }
  async calculateWordCountMap() {
    this.wordCountMap.clear();
    const vault = this.app.vault;
    const notes = vault.getMarkdownFiles();
    for (const note of notes) {
      const content = await vault.read(note);
      const words = content.split(/\s+/);
      words.forEach((word) => {
        const normalizedWord = word.toLowerCase();
        if (normalizedWord.length > 0) {
          const count = this.wordCountMap.get(normalizedWord) || 0;
          this.wordCountMap.set(normalizedWord, count + 1);
        }
      });
    }
    if (this.activeView) {
      const sortedWords = this.getSortedWords();
      const topWords = sortedWords.slice(0, 100);
      const wordList = topWords.map(([word, count], index) => `${index + 1}: ${word} (${count})`);
      this.activeView.updateContent(wordList);
    }
  }
  getSortedWords() {
    return Array.from(this.wordCountMap.entries()).sort((a, b) => b[1] - a[1]);
  }
  handleFileOpen(file) {
    this.calculateWordCountMap();
  }
  onunload() {
    this.wordCountMap.clear();
  }
};
var MostUsedWordsView = class extends import_obsidian.View {
  constructor(leaf, wordList) {
    super(leaf);
    this.wordList = wordList;
  }
  getViewType() {
    return "most-used-words-view";
  }
  getDisplayText() {
    return "Most Used Words";
  }
  onload() {
    this.containerEl.addClass("markdown-preview-view");
    this.containerEl.style.overflow = "auto";
    this.updateContent(this.wordList);
  }
  updateContent(wordList) {
    this.containerEl.empty();
    const contentDiv = document.createElement("div");
    contentDiv.classList.add("markdown-preview-view-content");
    wordList.forEach((item) => {
      const itemDiv = document.createElement("div");
      itemDiv.textContent = item;
      contentDiv.appendChild(itemDiv);
    });
    this.containerEl.appendChild(contentDiv);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgUGx1Z2luLCBXb3Jrc3BhY2VMZWFmLCBWaWV3LCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1vc3RVc2VkV29yZHNQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xyXG4gICAgcHJpdmF0ZSB3b3JkQ291bnRNYXA6IE1hcDxzdHJpbmcsIG51bWJlcj4gPSBuZXcgTWFwKCk7XHJcbiAgICBwcml2YXRlIGFjdGl2ZVZpZXc6IE1vc3RVc2VkV29yZHNWaWV3IHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgb25sb2FkKCkge1xyXG4gICAgICAgIHRoaXMuYWRkUmliYm9uSWNvbignZG9jdW1lbnQnLCAnU2hvdyBNb3N0IFVzZWQgV29yZHMgTGlzdCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5zaG93TW9zdFVzZWRXb3Jkc0xpc3QoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcclxuICAgICAgICAgICAgaWQ6ICdzaG93LW1vc3QtdXNlZC13b3Jkcy1saXN0JyxcclxuICAgICAgICAgICAgbmFtZTogJ1Nob3cgTW9zdCBVc2VkIFdvcmRzIExpc3QnLFxyXG4gICAgICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zaG93TW9zdFVzZWRXb3Jkc0xpc3QoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAud29ya3NwYWNlLm9uKCdmaWxlLW9wZW4nLCB0aGlzLmhhbmRsZUZpbGVPcGVuLmJpbmQodGhpcykpKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzaG93TW9zdFVzZWRXb3Jkc0xpc3QoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMud29yZENvdW50TWFwLnNpemUgPT09IDApIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5jYWxjdWxhdGVXb3JkQ291bnRNYXAoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHNvcnRlZFdvcmRzID0gdGhpcy5nZXRTb3J0ZWRXb3JkcygpO1xyXG4gICAgICAgIGNvbnN0IHRvcFdvcmRzID0gc29ydGVkV29yZHMuc2xpY2UoMCwgMTAwKTtcclxuICAgICAgICBjb25zdCB3b3JkTGlzdCA9IHRvcFdvcmRzLm1hcCgoW3dvcmQsIGNvdW50XSwgaW5kZXgpID0+IGAke2luZGV4ICsgMX06ICR7d29yZH0gKCR7Y291bnR9KWApO1xyXG5cclxuICAgICAgICBjb25zdCBsZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoKTtcclxuICAgICAgICBjb25zdCB2aWV3ID0gbmV3IE1vc3RVc2VkV29yZHNWaWV3KGxlYWYsIHdvcmRMaXN0KTtcclxuICAgICAgICBsZWFmLm9wZW4odmlldyk7XHJcbiAgICAgICAgdGhpcy5hY3RpdmVWaWV3ID0gdmlldztcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBjYWxjdWxhdGVXb3JkQ291bnRNYXAoKSB7XHJcbiAgICAgICAgdGhpcy53b3JkQ291bnRNYXAuY2xlYXIoKTtcclxuXHJcbiAgICAgICAgY29uc3QgdmF1bHQgPSB0aGlzLmFwcC52YXVsdDtcclxuICAgICAgICBjb25zdCBub3RlcyA9IHZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBub3RlIG9mIG5vdGVzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB2YXVsdC5yZWFkKG5vdGUpO1xyXG4gICAgICAgICAgICBjb25zdCB3b3JkcyA9IGNvbnRlbnQuc3BsaXQoL1xccysvKTtcclxuICAgICAgICAgICAgd29yZHMuZm9yRWFjaCh3b3JkID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRXb3JkID0gd29yZC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG5vcm1hbGl6ZWRXb3JkLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb3VudCA9IHRoaXMud29yZENvdW50TWFwLmdldChub3JtYWxpemVkV29yZCkgfHwgMDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLndvcmRDb3VudE1hcC5zZXQobm9ybWFsaXplZFdvcmQsIGNvdW50ICsgMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gSWYgYSB2aWV3IGlzIGFjdGl2ZSwgdXBkYXRlIGl0cyBjb250ZW50XHJcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlVmlldykge1xyXG4gICAgICAgICAgICBjb25zdCBzb3J0ZWRXb3JkcyA9IHRoaXMuZ2V0U29ydGVkV29yZHMoKTtcclxuICAgICAgICAgICAgY29uc3QgdG9wV29yZHMgPSBzb3J0ZWRXb3Jkcy5zbGljZSgwLCAxMDApO1xyXG4gICAgICAgICAgICBjb25zdCB3b3JkTGlzdCA9IHRvcFdvcmRzLm1hcCgoW3dvcmQsIGNvdW50XSwgaW5kZXgpID0+IGAke2luZGV4ICsgMX06ICR7d29yZH0gKCR7Y291bnR9KWApO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5hY3RpdmVWaWV3LnVwZGF0ZUNvbnRlbnQod29yZExpc3QpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRTb3J0ZWRXb3JkcygpIHtcclxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLndvcmRDb3VudE1hcC5lbnRyaWVzKCkpLnNvcnQoKGEsIGIpID0+IGJbMV0gLSBhWzFdKTtcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVGaWxlT3BlbihmaWxlOiBURmlsZSkge1xyXG4gICAgICAgIC8vIFVwZGF0ZSB3b3JkIGNvdW50IG1hcCB3aGVuIGEgZmlsZSBpcyBvcGVuZWRcclxuICAgICAgICB0aGlzLmNhbGN1bGF0ZVdvcmRDb3VudE1hcCgpO1xyXG4gICAgfVxyXG5cclxuICAgIG9udW5sb2FkKCkge1xyXG4gICAgICAgIHRoaXMud29yZENvdW50TWFwLmNsZWFyKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIE1vc3RVc2VkV29yZHNWaWV3IGV4dGVuZHMgVmlldyB7XHJcbiAgICB3b3JkTGlzdDogc3RyaW5nW107XHJcblxyXG4gICAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgd29yZExpc3Q6IHN0cmluZ1tdKSB7XHJcbiAgICAgICAgc3VwZXIobGVhZik7XHJcbiAgICAgICAgdGhpcy53b3JkTGlzdCA9IHdvcmRMaXN0O1xyXG4gICAgfVxyXG5cclxuICAgIGdldFZpZXdUeXBlKCkge1xyXG4gICAgICAgIHJldHVybiAnbW9zdC11c2VkLXdvcmRzLXZpZXcnO1xyXG4gICAgfVxyXG5cclxuICAgIGdldERpc3BsYXlUZXh0KCkge1xyXG4gICAgICAgIHJldHVybiAnTW9zdCBVc2VkIFdvcmRzJzsgLy8gVGhpcyBpcyBmb3Igd2hlbiB5b3UgZHJhZyBpdCBhcm91bmRcclxuICAgIH1cclxuXHJcbiAgICBvbmxvYWQoKSB7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5hZGRDbGFzcygnbWFya2Rvd24tcHJldmlldy12aWV3Jyk7IC8vIEFwcGx5IG1hcmtkb3duIHByZXZpZXcgdmlldyBzdHlsZXNcclxuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLnN0eWxlLm92ZXJmbG93ID0gJ2F1dG8nOyAvLyBFbmFibGUgc2Nyb2xsIGlmIGNvbnRlbnQgb3ZlcmZsb3dzXHJcblxyXG4gICAgICAgIHRoaXMudXBkYXRlQ29udGVudCh0aGlzLndvcmRMaXN0KTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVDb250ZW50KHdvcmRMaXN0OiBzdHJpbmdbXSkge1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwuZW1wdHkoKTsgLy8gQ2xlYXIgZXhpc3RpbmcgY29udGVudFxyXG5cclxuICAgICAgICBjb25zdCBjb250ZW50RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgY29udGVudERpdi5jbGFzc0xpc3QuYWRkKCdtYXJrZG93bi1wcmV2aWV3LXZpZXctY29udGVudCcpO1xyXG5cclxuICAgICAgICB3b3JkTGlzdC5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBpdGVtRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIGl0ZW1EaXYudGV4dENvbnRlbnQgPSBpdGVtO1xyXG4gICAgICAgICAgICBjb250ZW50RGl2LmFwcGVuZENoaWxkKGl0ZW1EaXYpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmFwcGVuZENoaWxkKGNvbnRlbnREaXYpO1xyXG4gICAgfVxyXG59XHJcbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxzQkFBbUQ7QUFFbkQsSUFBcUIsc0JBQXJCLGNBQWlELHVCQUFPO0FBQUEsRUFBeEQ7QUFBQTtBQUNJLFNBQVEsZUFBb0Msb0JBQUksSUFBSTtBQUNwRCxTQUFRLGFBQXVDO0FBQUE7QUFBQSxFQUUvQyxTQUFTO0FBQ0wsU0FBSyxjQUFjLFlBQVksNkJBQTZCLFlBQVk7QUFDcEUsWUFBTSxLQUFLLHNCQUFzQjtBQUFBLElBQ3JDLENBQUM7QUFFRCxTQUFLLFdBQVc7QUFBQSxNQUNaLElBQUk7QUFBQSxNQUNKLE1BQU07QUFBQSxNQUNOLFVBQVUsWUFBWTtBQUNsQixjQUFNLEtBQUssc0JBQXNCO0FBQUEsTUFDckM7QUFBQSxJQUNKLENBQUM7QUFFRCxTQUFLLGNBQWMsS0FBSyxJQUFJLFVBQVUsR0FBRyxhQUFhLEtBQUssZUFBZSxLQUFLLElBQUks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
